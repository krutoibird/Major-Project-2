import pygame


pygame.init()


screen1 = pygame.display.set_mode((720, 360))
ground2_surface = pygame.image.load("Image/ground2.png").convert_alpha()
worm_model = pygame.image.load("Image/ass.png").convert_alpha()

# This vector controls the movement direction of the worm
velocity = pygame.math.Vector2(0, 0)

CELL = 50  # Size of the worm block (50x50 square)




class Worm(pygame.sprite.Sprite):
    def __init__(self, image, position):
        super().__init__()
        self.image = image

        # Worm head position (stored as Vector2)
        self.position = pygame.math.Vector2(position)

        # Rect is the box used for drawing and collision
        # center puts the image at the given x,y position
        self.rect = self.image.get_rect(center=position)

    def move(self):
        # Move the worm by adding the velocity
        self.position += velocity

        # Keep worm inside the screen (restrict movement)
        # max makes sure it's not less than 0
        # min makes sure it doesn't go past the screen edge
        self.position.x = max(0, min(self.position.x, screen1.get_width() - CELL))
        self.position.y = max(0, min(self.position.y, screen1.get_height() - CELL))

        # Update the rect position so pygame knows where to draw the image
        self.rect.center = self.position

    def draw(self, surface):
        # Draw the worm (green square) at its current rect position
        surface.blit(self.image, self.rect)


'''class Apple(pygame.sprite.Sprite):
    def __init__(self, image, position):
        super().__init__()
        self.image = image
        self.rect = self.image.get_rect(center=position)
'''








worm = Worm(worm_model, (CELL * 5, CELL * 5))
screen1.blit(ground2_surface, (0, 0))
gameactive = True
clock = pygame.time.Clock()

while gameactive:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            gameactive = False

        # When a key is pressed, add movement to velocity
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_w:
                velocity += pygame.math.Vector2(0, -CELL)
            if event.key == pygame.K_s:
                velocity += pygame.math.Vector2(0, CELL)
            if event.key == pygame.K_a:
                velocity += pygame.math.Vector2(-CELL, 0)
            if event.key == pygame.K_d:
                velocity += pygame.math.Vector2(CELL, 0)

        # When the key is released, undo the movement
        # so the worm stops moving
        if event.type == pygame.KEYUP:
            if event.key == pygame.K_w:
                velocity += pygame.math.Vector2(0, CELL)
            if event.key == pygame.K_s:
                velocity += pygame.math.Vector2(0, -CELL)
            if event.key == pygame.K_a:
                velocity += pygame.math.Vector2(CELL, 0)
            if event.key == pygame.K_d:
                velocity += pygame.math.Vector2(-CELL, 0)

    screen1.blit(ground2_surface, (0, 0))
    worm.move()

    worm.draw(screen1)
    pygame.display.update()
    pygame.time.Clock().tick(10)
